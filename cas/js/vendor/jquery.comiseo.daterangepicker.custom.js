!function(a,b,c){function d(b,c,d){function e(){l="drp_autogen"+i++,a('label[for="'+b.attr("id")+'"]').attr("for",l)}function f(){e(),k=a('<button type="button"></button>').addClass(c+"-triggerbutton").attr({title:b.attr("title"),tabindex:b.attr("tabindex"),id:l}).button({icons:{secondary:d.icon},label:d.initialText})}function g(){return k.button("option","label")}function h(a){k.button("option","label",a)}function j(){b.val("").change(),h(d.initialText)}var k,l;return f(),{getElement:function(){return k},getLabel:g,setLabel:h,reset:j}}function e(b,c,d){function e(){f=a("<div></div>").addClass(b+"-presets"),g=a("<ul></ul>"),a.each(c.presetRanges,function(){a('<li><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(d).appendTo(g)}),f.append(g),g.menu().data("ui-menu").delay=0}var f,g;return e(),{getElement:function(){return f}}}function f(b,c){function d(){k=a("<div></div>",{"class":b+"-calendar ui-widget-content"}),k.datepicker(a.extend({},c.datepickerOptions,{beforeShowDay:f,onSelect:e})),g()}function e(b,d){var e=c.datepickerOptions.dateFormat||a.datepicker._defaults.dateFormat,f=a.datepicker.parseDate(e,b);!l.start||l.end?(l.start=f,l.end=null):f<l.start?(l.end=l.start,l.start=f):l.end=f,c.datepickerOptions.hasOwnProperty("onSelect")&&c.datepickerOptions.onSelect(b,d,l)}function f(a){var b=l.start&&(+a===+l.start||l.end&&l.start<=a&&a<=l.end)?"ui-state-highlight":"";!l.start||+a!==+l.start&&l.start!=a?(+a===+l.end||l.end==a)&&(b="ui-state-highlight-end"):b="ui-state-highlight-start";var d=[!0,b],e=[!0,""];return c.datepickerOptions.hasOwnProperty("beforeShowDay")&&(e=c.datepickerOptions.beforeShowDay(a)),[d[0]&&e[0],d[1]+" "+e[1]]}function g(){setTimeout(function(){i(),g()},moment().endOf("day")-moment())}function h(){l.start&&k.datepicker("setDate",l.start)}function i(){k.datepicker("refresh"),k.datepicker("setDate",null)}function j(){l={start:null,end:null},i()}var k,l={start:null,end:null};return d(),{getElement:function(){return k},scrollToRangeStart:function(){return h()},getRange:function(){return l},setRange:function(a){l=a,i()},refresh:i,reset:j}}function g(b,c,d){function e(){h=a('<button type="button" class="ui-priority-primary"></button>').text(c.applyButtonText).button(),i=a('<button type="button" class="ui-priority-secondary"></button>').text(c.clearButtonText).button(),j=a('<button type="button" class="ui-priority-secondary"></button>').text(c.cancelButtonText).button(),g=a("<div></div>").addClass(b+"-buttonpanel").append(h).append(i).append(j),f()}function f(){d&&(h.click(d.onApply),i.click(d.onClear),j.click(d.onCancel))}var g,h,i,j;return e(),{getElement:function(){return g}}}function h(c,h){function i(){E=d(c,I,h),F=e(I,h,u),G=f(I,h),k.numberOfMonths=h.datepickerOptions.numberOfMonths,k.numberOfMonths instanceof Array&&(h.autoFitCalendars=!1),H=g(I,h,{onApply:function(){z(),r()},onClear:function(){z(),t()},onCancel:function(){z(),q()}}),j(),k(),q(),m()}function j(){C=a("<div></div>",{"class":I+" "+I+"-"+P[Q]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(a("<div></div>",{"class":I+"-main ui-widget-content"}).append(F.getElement()).append(G.getElement())).append('<div class="datepicker_bottom_block"><div class="info_block"><span class="starting">Starting</span><span class="ending">Ending</span></div><div class="reset_block"><span class="reset js-reset">Reset</span></div></div>').append(a('<div class="ui-helper-clearfix"></div>').append(H.getElement())).hide(),c.hide().after(E.getElement()),D=a("<div></div>",{"class":"ui-front "+I+"-mask"}).hide(),a("body").append(D).append(C)}function k(){if(h.autoFitCalendars){var c=a(b).width(),d=C.outerWidth(!0),e=G.getElement(),f=e.datepicker("option","numberOfMonths"),g=f;if(d>c){for(;f>1&&C.outerWidth(!0)>c;)e.datepicker("option","numberOfMonths",--f);f!==g&&(k.monthWidth=(d-C.outerWidth(!0))/(g-f))}else for(;f<k.numberOfMonths&&c-C.outerWidth(!0)>=k.monthWidth;)e.datepicker("option","numberOfMonths",++f);v(),K=!1}}function l(){C.remove(),E.getElement().remove(),c.show()}function m(){E.getElement().click(A),E.getElement().keydown(x),D.click(z),a(b).resize(function(){J?k():K=!0})}function n(b){var c=h.dateFormat;return a.datepicker.formatDate(c,b.start)+(+b.end!==+b.start?h.rangeSplitter+a.datepicker.formatDate(c,b.end):"")}function o(b){var c=h.altFormat,d={};return d.start=a.datepicker.formatDate(c,b.start),d.end=a.datepicker.formatDate(c,b.end),JSON.stringify(d)}function p(b){var c=h.altFormat,d=null;if(b)try{d=JSON.parse(b,function(b,d){return b?a.datepicker.parseDate(c,d):d})}catch(e){}return d}function q(){var a=p(c.val());a?(E.setLabel(n(a)),G.setRange(a)):G.reset()}function r(a){var b=a||G.getRange();b.start&&(b.end||(b.end=b.start),a&&G.setRange(b),E.setLabel(n(b)),c.val(o(b)).change(),h.onChange&&h.onChange())}function s(){return p(c.val())}function t(){E.reset(),G.reset(),c.val("")}function u(){var b=a(this),c=b.data("dateStart")().startOf("day").toDate(),d=b.data("dateEnd")().startOf("day").toDate();return G.setRange({start:c,end:d}),h.applyOnMenuSelect&&(z(),r()),!1}function v(){C.position({my:"left top",at:"left bottom"+(h.verticalOffset<0?h.verticalOffset:"+"+h.verticalOffset),of:E.getElement(),collision:"flipfit flipfit",using:function(a,b){var c,d,e=b.element.left+b.element.width/2,f=b.target.left+b.target.width/2,g=Q,i=b.element.top+b.element.height/2,j=b.target.top+b.target.height/2,k=R;Q=e>f?M:L,Q!==g&&(h.mirrorOnCollision&&(c=Q===L?F:G,C.children().first().append(c.getElement())),C.removeClass(I+"-"+P[g]),C.addClass(I+"-"+P[Q])),C.css({left:a.left,top:a.top}),R=i>j?O:N,R!==k&&(null!==k&&E.getElement().removeClass(I+"-"+P[k]),E.getElement().addClass(I+"-"+P[R])),d=R===O&&b.element.top-b.target.top!==b.target.height+h.verticalOffset||R===N&&b.target.top-b.element.top!==b.element.height+h.verticalOffset,E.getElement().toggleClass(I+"-vfit",d)}})}function w(a){a.preventDefault(),a.stopPropagation()}function x(b){switch(b.which){case a.ui.keyCode.UP:case a.ui.keyCode.DOWN:return w(b),void y();case a.ui.keyCode.ESCAPE:return w(b),void z();case a.ui.keyCode.TAB:return void z()}}function y(){J||(E.getElement().addClass(I+"-active"),D.show(),J=!0,K&&k(),G.scrollToRangeStart(),C.show(),v()),h.onOpen&&h.onOpen()}function z(){J&&(C.hide(),D.hide(),E.getElement().removeClass(I+"-active").closest(".calendarWrap").removeClass("active"),J=!1),h.onClose&&h.onClose()}function A(){J?z():y()}function B(){return C}var C,D,E,F,G,H,I="comiseo-daterangepicker",J=!1,K=!1,L=0,M=1,N=2,O=3,P=["left","right","top","bottom"],Q=M,R=null;return i(),{toggle:A,destroy:l,open:y,close:z,setRange:r,getRange:s,clearRange:t,reset:q,getContainer:B}}var i=0;a.widget("comiseo.daterangepicker",{version:"0.4.0",options:{presetRanges:[{text:"Today",dateStart:function(){return moment()},dateEnd:function(){return moment()}},{text:"Yesterday",dateStart:function(){return moment().subtract("days",1)},dateEnd:function(){return moment().subtract("days",1)}},{text:"Last 7 Days",dateStart:function(){return moment().subtract("days",6)},dateEnd:function(){return moment()}},{text:"Last Week (Mo-Su)",dateStart:function(){return moment().subtract("days",7).isoWeekday(1)},dateEnd:function(){return moment().subtract("days",7).isoWeekday(7)}},{text:"Month to Date",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment()}},{text:"Previous Month",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Year to Date",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],verticalOffset:0,initialText:"Select date range...",icon:"ui-icon-triangle-1-s",applyButtonText:"Apply",clearButtonText:"Clear",cancelButtonText:"Cancel",rangeSplitter:" - ",dateFormat:"M d, yy",altFormat:"yy-mm-dd",mirrorOnCollision:!0,applyOnMenuSelect:!0,autoFitCalendars:!0,onOpen:null,onClose:null,onChange:null,datepickerOptions:{numberOfMonths:3,maxDate:0}},_create:function(){this._dateRangePicker=h(this.element,this.options)},_destroy:function(){this._dateRangePicker.destroy()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},setRange:function(a){this._dateRangePicker.setRange(a)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}})}(jQuery,window);